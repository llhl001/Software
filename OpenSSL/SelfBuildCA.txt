通过 OpenSSL 自建 CA 认证机构 {
    创建 CA 根目录 {
        shell> mkdir ~/ca
        shell> cd ~/ca
    }
    
    生成 CA 认证机构根证书（CA 根证书都是 自签名 证书） {
        # 列出所有支持的曲线，选择自己浏览器支持的曲线，来生成密钥
        shell> openssl ecparam -list_curves             
        
        # 生成 CA 根证书密钥对，包含公私钥
        shell> openssl ecparam -genkey -name prime256v1 -out ./rootca.key.pem       
        
        # 创建一个自己的 openssl.cnf 配置文件，可以使用 Software/OpenSSL/openssl.cnf 作为模板修改
        shell> touch myOpenssl.cnf          
        
        # 生成 CA 自签名根证书
        shell> openssl req -new -x509 -days 36500 -config ./myOpenssl.cnf -key ./rootca.key.pem -out ./rootca.crt.pem  
    }
    
    生成 Nginx 证书 {
        shell> openssl ecparam -genkey -name prime256v1 -out ./nginx.key.pem
        shell> openssl req -new -config ./myOpenssl.cnf -key ./nginx.key.pem -out ./nginx.csr         # 生成证书请求文件
    }
    
    使用 CA 证书签署 Nginx 证书 {
        shell> openssl x509 -req -in ./nginx.csr -extfile ./myOpenssl.cnf -extensions crt_ext -days 365 -sha256 \
                -CA ./rootca.crt.pem -CAkey ./rootca.key.pem -CAcreateserial -out ./nginx.crt.pem
    }
    
    测试 Nginx 证书可用性 {
        # 模拟一个 TLS Web 服务端供客户端验证
        shell> openssl s_server -accept 4433 -HTTP -cert ./nginx.crt.pem -key ./nginx.key.pem
    }
    
    将证书安装到 Windows {
        把 ./rootca.crt.pem 名称改为 rootca.crt 然后安装为 根证书即可
    }
}

TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256

    
    




















