{
  "log": {"loglevel": "debug"},
  "inbounds": [
    {
      "tag": "ladderSocksIn",
      "protocol": "socks",
      "port": 1080,
      "listen": "127.0.0.1",
      "settings": {
        "auth": "noauth"
      }
    }
  ],
  "outbounds": [    
    /** todo 翻墙流量出口 */
    {
      "tag": "ladderOut",
      "protocol": "vmess",
      "settings": {
        "vnext": [
          {
            "address": "1291114093.ml",
            "port": 443,
            "users": [
              { "id":"d45499fa-6c4b-3e55-adbb-bd50bc4137b8", "security":"chacha20-poly1305", "alterId":4, "level":0 }
            ]
          }
        ]
      },
      "streamSettings": {
        "network": "ws",
        "wsSettings": {
          "path": "/v2ray/ladder/ws",
          "headers": {
            "Host": "1291114093.ml"
          }
        },
        "security": "tls", 
        "tlsSettings": {
          "serverName": "1291114093.ml",
          "certificates": [
            // { "usage": "verify", "certificateFile": "F:/V2Ray/v2ray-windows-64/rootca.crt" } // 如果使用自建 CA 签名的证书，需要添加 CA 证书
          ]
        }
      }
    },
    /** todo 直连出口 */
    {
      "tag": "freedomOut",
      "protocol": "freedom"
    }
  ],
  "routing": {
    "domainStrategy": "AsIs",       // 使用系统的 DNS 解析
    "rules": [
      /** todo 翻墙流量，从 VPS 出 */
      {
        "type": "field",
        "network": "tcp,udp",
        "inboundTag": ["ladderSocksIn"],
        "outboundTag": "ladderOut"
      },
      /** todo 国内流量直连 */
      {
        "type": "field",
        "domain": [
          "geosite:tld-cn",
          "geosite:geolocation-cn",
          "geosite:cn"
        ],
        "ip": [
          "geoip:private",
          "geoip:cn"
        ],
        "network": "tcp,udp",
        "outboundTag": "freedomOut"
      }
    ]
  }
}



